<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
	<link rel="stylesheet" href="page1style.css">
	<title>KinFit - Stationary Bike Data</title>
</head>

<body>
	<!-- SIDEBAR -->
	<section id="sidebar">
		<a href="#" class="brand"><i class='bx bxs-smile icon'></i> KinFit</a>
		<ul class="side-menu">
			<li><a href="index.html"><i class='bx bxs-dashboard icon'></i> Dashboard</a></li>
			<li class="divider" data-text="main">Main</li>
			<li>
				<a href="#"><i class='bx bxs-inbox icon'></i> Analytics <i
						class='bx bx-chevron-right icon-right'></i></a>
				<ul class="side-dropdown">
					<li><a href="#">Real Time Alerts</a></li>
					<li><a href="#">Equipment Status</a></li>
					<li><a href="#">Total Energy Generated</a></li>
				</ul>
			</li>
			<li><a href="members.html"><i class='bx bxs-widget icon'></i> Members</a></li>
			<li><a href="#"><i class='bx bxs-widget icon'></i> Rewards</a></li>
		</ul>
	</section>
	<!-- SIDEBAR -->

	<!-- NAVBAR -->
	<section id="content">
		<!-- NAVBAR -->
		<nav>
			<i class='bx bx-menu toggle-sidebar'></i>
			<form action="#">
			</form>
			<span class="divider"></span>
			<div class="profile">
				<img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGVvcGxlfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60"
					alt="">
				<ul class="profile-link">
					<li><a href="#"><i class='bx bxs-user-circle icon'></i> Profile</a></li>
					<li><a href="#"><i class='bx bxs-cog'></i> Settings</a></li>
					<li><a href="login.html"><i class='bx bxs-log-out-circle'></i> Logout</a></li>
				</ul>
			</div>
		</nav>
		<!-- NAVBAR -->

		<!-- MAIN -->
		<main>
			<ul class="breadcrumbs">
				<li><a href="index.html">Home</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Dashboard</a></li>
				<li class="divider">/</li>
				<li><a href="#" class="active">Stationary Bike</a></li>
			</ul>
			<div class="info-data">
				<a href="#" class="card-link">
					<div class="card">
						<div class="head">
							<div>
								<h2>RPM</h2>
								<p>RPM generated by Stationary Bike</p>
							</div>
							<i class='bx bx-trending-up icon'></i>
						</div>
						<div class="chart-container">
							<div id="chart1"></div>
						</div>
					</div>
				</a>
				<a href="#" class="card-link">
					<div class="card">
						<div class="head">
							<div>
								<h2>Temperature</h2>
								<p>Temperature by Stationary Bike</p>
							</div>
							<i class='bx bx-trending-up icon'></i>
						</div>
						<div class="chart-container">
							<div id="chart3"></div>
						</div>
					</div>
				</a>
				<a href="#" class="card-link">
					<div class="card">
						<div class="head">
							<div>
								<h2>Current (A)</h2>
								<p>Current generated by Stationary Bike</p>
							</div>
							<i class='bx bx-trending-up icon'></i>
						</div>
						<div class="chart-container">
							<div id="chart5"></div>
						</div>
					</div>
				</a>
				<a href="#" class="card-link">
					<div class="card">
						<div class="head">
							<div>
								<h2>Voltage (V)</h2>
								<p>Voltage generated by Stationary Bike</p>
							</div>
							<i class='bx bx-trending-up icon'></i>
						</div>
						<div class="chart-container">
							<div id="chart4"></div>
						</div>
					</div>
				</a>
				<a href="#" class="card-link">
					<div class="card">
						<div class="head">
							<div>
								<h2>Total Energy</h2>
								<p>Energy Generated</p>
							</div>
							<i class='bx bx-trending-up icon'></i>
						</div>
						<div class="chart-container">
							<div id="chart6"></div>
						</div>
					</div>
				</a>
			</div>

			<table>
				<thead>
					<tr>
						<th>S.no</th>
						<th>Equipment ID</th>
						<th>RPM</th>
						<th>Voltage (in V)</th>
						<th>Timestamp</th>
						<th>Temperature (Â°C)</th>
						<th>Current (in Amp)</th>
					</tr>
				</thead>
				<tbody id="data-body">
					<!-- Data will be dynamically inserted here -->
				</tbody>
			</table>
		</main>
		<!-- MAIN -->
	</section>
	<!-- NAVBAR -->

	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
	<script src="script.js"></script>
	<script>
		// Fetch sensor data from the backend and populate the table
		fetch('https://pulsewatt-backend.onrender.com/data')
		  .then(response => response.json())
		  .then(data => {
			// If data is not an array, wrap it so we can still use forEach
			if (!Array.isArray(data)) {
			  data = [data];
			}
	  
			const tbody = document.getElementById('data-body');
			tbody.innerHTML = ''; // Clear existing content
	  
			data.forEach((item, index) => {
			  const row = document.createElement('tr');
			  row.innerHTML = `
				<td>${index + 1}</td>
				<td>${item.Equipment_ID}</td>
				<td>${item.RPM_rev_min}</td>
				<td>${item.Voltage_V}</td>
				<td>${item.Timestamp}</td>
				<td>${item.Temperature_C}</td>
				<td>${item.Current_A}</td>
			  `;
			  tbody.appendChild(row);
			});
		  })
		  .catch(err => console.error("Error fetching data:", err));
	  </script>
</body>

</html>